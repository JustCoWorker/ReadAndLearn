
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

* [2 基础网络概念](#2-基础网络概念)
	* [2.1 网络是个什么玩意儿](#21-网络是个什么玩意儿)
		* [2.1.4 计算机网络协议： OSI 七层协定](#214-计算机网络协议-osi-七层协定)
			* [七层结构[1]](#七层结构1)
			* [五种中继系统[2]](#五种中继系统2)
			* [协议数据单元PDU[1]](#协议数据单元pdu1)
	* [2.2 TCP/IP的链结层相关协议](#22-tcpip的链结层相关协议)
		* [2.2.3 以太网络的传输协议： CSMA/CD](#223-以太网络的传输协议-csmacd)
			* [集线器](#集线器)
		* [2.2.4 MAC 的封装格式](#224-mac-的封装格式)
	* [2.3 TCP/IP的网络层相关封包与数据](#23-tcpip的网络层相关封包与数据)
		* [2.3.1 IP封包的封装](#231-ip封包的封装)
		* [2.3.2 IP 地址的组成与分级](#232-ip-地址的组成与分级)
			* [IP](#ip)
			* [网域](#网域)
		* [2.3.4 Netmask, 子网与 CIDR (Classless Interdomain Routing)](#234-netmask-子网与-cidr-classless-interdomain-routing)
			* [子网切分](#子网切分)
		* [2.3.5 路由概念](#235-路由概念)
	* [2.4 TCP/IP 的传输层相关封包与数据](#24-tcpip-的传输层相关封包与数据)

<!-- /code_chunk_output -->
---

# 2 基础网络概念


## 2.1 网络是个什么玩意儿

### 2.1.4 计算机网络协议： OSI 七层协定


* 参考:
  1. [OSI（开放系统互联(Open System Interconnection)）_百度百科 ](https://baike.baidu.com/item/OSI/5520?fr=aladdin)
  2. [OSI七层模型详解 - - CSDN博客 ](http://blog.csdn.net/yaopeng_2005/article/details/7064869)

OSI七层协议（Open System Interconnection）

#### 七层结构[1]

|具体7层|数据格式|功能与连接方式|典型设备|
|-|-|-|-|
|应用层 Application|数据Data|网络服务与使用者应用程序间的一个接口|终端设备（PC、手机、平板等）|
|表示层 Presentation|数据Data|数据表示、数据安全、数据压缩|终端设备（PC、手机、平板等）|
|会话层 Session|数据Data|会话层连接到传输层的映射；会话连接的流量控制；数据传输；会话连接恢复与释放；会话连接管理、差错控制|终端设备（PC、手机、平板等）|
|**传输层** Transport|数据组织成数据段Segment|用一个寻址机制来标识一个特定的应用程序（端口号）|终端设备（PC、手机、平板等）|
|**网络层** Network|分割和重新组合数据包Packet|基于网络层地址（IP地址）进行不同网络系统间的路径选择|**网关、路由器**|
|**数据链路层** Data Link|将**比特**信息封装成**数据帧Frame**|在物理层上建立、撤销、标识逻辑链接和链路复用 以及差错校验等功能。通过使用接收系统的硬件地址或物理地址来寻址|**网桥、交换机**|
|**物理层**Physical|**传输比特（bit）流**|建立、维护和取消物理连接|光纤、同轴电缆、|**双绞线、网卡、中继器、集线器**|


#### 五种中继系统[2]

* **物理层**
  * （即常说的第一层、层Ｌ1）中继系统，即转发器（repeater）。
  * 网卡，网线，集线器，中继器，调制解调器。
  * **比特**
* **数据链路层**
  * （即第二层，层Ｌ2），即**网桥**或桥接器（bridge）。
  * 网桥，交换机。
  * **MAC**(Media Access Control)，**数据帧**。
  * 该层通常又被分为介质访问控制（MAC）和逻辑链路控制（LLC）两个子层
    * MAC子层的主要任务是解决共享型网络中多用户对信道竞争的问题，完成网络介质的访问控制
    * LLC子层的主要任务是建立和维护网络连接，执行差错校验、流量控制和链路控制。
* **网络层**
  * （第三层，层Ｌ3）中继系统，即**路由器**（router）。
  * 网桥和路由器的混合物桥路器（brouter）兼有网桥和路由器的功能。
  * 路由器。**IP**(Internet Protocol)，**数据包**。
* **传输层**。
  * 在网络层以上的中继系统，即**网关（gateway）**。
  * 网关工作在第四层传输层及其以上。
  * TCP，UDP，**数据段**。

#### 协议数据单元PDU[1]
OSI参考模型中，对等层协议之间交换的信息单元统称为协议数据单元(PDU，Protocol Data Unit)。而传输层及以下各层的PDU另外还有各自特定的名称：

* 传输层——数据段（Segment）
* 网络层——分组（数据包）（Packet）
* 数据链路层——数据帧（Frame）
* 物理层——比特（Bit）

## 2.2 TCP/IP的链结层相关协议

### 2.2.3 以太网络的传输协议： CSMA/CD

IEEE 802.3标准CSMA/CD（Carrier Sense Multiple Access with Collision Detection）

#### 集线器

* 集线器
  * 集线器是一种网络共享媒体；
  * 网络共享媒体在单一时间点内，仅能被一部主机所使用；
  * 不管哪一部主机发送讯框，集线器会复制一份该数据给所有计算机；

### 2.2.4 MAC 的封装格式

## 2.3 TCP/IP的网络层相关封包与数据

### 2.3.1 IP封包的封装

IPv4(Internet Protocol version 4，因特网协定第四版)

### 2.3.2 IP 地址的组成与分级

#### IP

* IP：
  * IP(Internet Protocol)是一种网络封包；
  * 封包的表头最重要的就是32位的来源与目的地址；
  * 32 bits的IP分成四小段，每段含有8个bits；
  * 主要分为Net_ID(网域号码)与Host_ID(主机号码)两部分；

#### 网域

* 网域：  
  * **网域**的定义：在同一个物理网段内，主机的IP具有相同的Net_ID，并且具有独特的Host_ID；
  * 同网段内，Net_ID不变，Host_ID不重复；
  * Host_ID不可同时为0也不可同时为1；
  * Host_ID全为0表示整个网段的地址Network IP；
  * Host_ID全为1表示广播的地址Broadcast IP；
  * 同网段主机可通过CSMA/CD广播通信，也可通过MAC直接通信；


### 2.3.4 Netmask, 子网与 CIDR (Classless Interdomain Routing)


#### 子网切分



### 2.3.5 路由概念

在同一个区网中，可以通过IP广播的方式来达到资料传递的目的。非区网内的数据需要通过路由器。

* 路由：
  * Gateway/Router：网关/路由器的功能就是在负责不同网域之间的封包传递（IP Forwarding）.
  * 封包进过路由器后，将有路由器中的**路由表**来决定发送目的地。

## 2.4 TCP/IP 的传输层相关封包与数据

* IP
  * 网络层的IP封包只负责将数据送到正确的目标主机
  * 封包会不会被接收不是IP的任务
* 表头
  * Source Port & Destination Port来源端口 & 目标端口
  * Sequence Number封包序号