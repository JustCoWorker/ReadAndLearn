
* [微服务架构：基于微服务和Docker容器技术的PaaS云平台架构设计（微服务架构实施原理） - 风中程序猿 - 博客园 ](http://www.cnblogs.com/fangfuhai/p/7065847.html)

* 建设目标
  * 提供服务快速开发、部署、运维管理、持续开发持续集成的流程
  * 平台提供基础设施、中间件、数据服务、云服务器等资源
  * 提交代码后，系统自动构建、部署
* PaaS云平台架构
  * 微服务架构
  * Docker容器技术
  * DevOps
* 访问路径
  * 外部请求 -> 负载均衡 -> 服务网关 -> 微服务 -> 数据服务/消息服务
  * 服务网关和微服务都会用到服务注册和发现来调用依赖的其他服务
  * 各服务集群都能通过配置中心服务来获得配置信息
* 服务网关
  * 所有的客户端请求通过网关访问后台服务
  * ELB(Elastic Load Balancing)做负载均衡
  * 用户流量达到尖峰，自动增加容量以维持虚拟主机的性能
  * 基本功能
    * 动态路由
      * 动态的将请求路由到所需要的后端服务集群
    * 限流和容错
      * 请求数量超过阈值时抛弃，限制流量
      * 集中处理错误，不转发错误请求
    * 身份认证和安全性控制
    * 监控
      * 通过网关收集数据
    * 访问日志
* 服务注册与发现
  * 在Eureka服务器中进行注册，并定期检查
  * 自我保护模式：短时间内丢失过多服务，不再删除服务
  * 搭建DNS服务器建立Eureka集群
* 微服务部署
  * 微服务划分为前端服务和后端服务
  * 微服务以镜像的形式，运行在Docker容器中
  * 使用Docker Swarm对容器进行管理
* 服务容错
  * 熔断模式
    * 服务大量延时或异常，执行fallback逻辑直接返回，不再调用服务
    * 等一段时间后，进入半熔断状态，允许少量请求
      * 成功，关闭熔断
      * 失败，继续熔断
  * 隔离模式
    * 不同的服务使用不同的线程池
  * 回退
    * 程序抛出异常
    * 程序运行超时
    * 熔断启动
    * 线程池满
  * 限流
    * 限制单位时间内的并发数
* 动态配置中心
  * 配置文件存放在git服务器
  * push后，git服务端hooks(post-receive)自动检测是否有配置文件更新
  * 有更新，则通过消息队列给配置中心发送消息
  * 配置收到消息，刷新对应的配置文件