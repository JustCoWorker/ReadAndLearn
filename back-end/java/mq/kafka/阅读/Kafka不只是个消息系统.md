

Kafka不只是个消息系统 
http://www.infoq.com/cn/news/2017/10/Kafka-not-just-messag-system

https://www.confluent.io/blog/okay-store-data-apache-kafka/

* Kafka的真正定位
  * 不只是一个消息系统
  * 还是个存储系统
  * 终极目标是要让流式处理称为现代企业的主流开发范式
* 存储
  * 把数据保留策略设置为“永久”或者启用主题的日志压缩功能，可永久保存数据
* 为什么要把Kafka作为数据存储
  * 构建一个基于事件溯源的应用程序，需要一个数据存储来保存变更日志
  * Kafka已经解决了不可变(immutable)日志和基于这些日志生成“物化视图”的问题
  * 从Kafka上获取数据来更新缓存
  * 流式作业数据流来自Kafka
  * Kafka被用于捕获和分发数据库的变更事件（CDC，Change Data Capture）
  * 数据经过校验后被持久化在磁盘上，并通过复制副本提升容错能力
* 传统的消息系统不能用来保存消息
  * 消息被读取就会被删除
  * 伸缩性差
  * 缺乏健壮的复制机制（如果broker崩溃，数据也就丢失了）
* Kafka与传统消息系统之间的三个关键区别
  * Kafka持久化日志，这些日志可以被重复读取和无限期保留
  * Kafka是一个分布式系统：它以集群的方式运行，可以灵活伸缩，在内部通过复制数据提升容错能力和高可用性
  * Kafka支持实时的流式处理
* 消息系统、存储系统和Kafka之间的关系
  * Kafka是一种流式处理平台
  * 消息系统传播的是“未来”的消息
  * 存储系统保存的是过去写入的数据
  * 流式处理既可以处理过去的数据，也可以处理未来的消息
  * Kafka提供统一的协议和API来保存过去的数据和传播未来的消息
* 日志
  * 日志就是分布式文件系统中的一个文件
  * 日志是一个消息系统
* 压缩主题
  * 偏移量被保存在一个压缩主题上
  * Kafka Streams API使用压缩主题来记录应用程序的处理状态
* Kafka作为存储系统包揽了正确性、运行时间和数据完整性等方面的工作
* Kafka是否取代其他存储引擎
  * 数据库提供大量的查询，而Kafka并不打算在日志上增加随机访问的特性
  * Kafka是构建数据库的基础，查询较二级索引和视图
  * Kafka集群保存日志，Streams API保存物化视图并处理查询请求
  * 引入KSQL，Kafka的流式SQL引擎